<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>NEURAL LINK // THE SYNTHESIZER V4</title>
    <!-- Modular Styles -->
    <link rel="stylesheet" href="css/universe.css">
    <link rel="stylesheet" href="css/chronicle.css">
    <link rel="stylesheet" href="css/event_lines.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>

<body>
    <div id="app-container">
        <!-- Upper (60%): 3D Multiverse & Chronicle Panel -->
        <div id="upper-view">
            <div id="canvas-container">
                <canvas id="universe-canvas"></canvas>
            </div>

            <!-- Story Chronicle Panel (Log) -->
            <div id="chronicle-panel">
                <div class="panel-header">CHRONICLE // 命运日志</div>
                <div id="chronicle-content">
                    <div class="log-entry system-msg">等待神经链路接入...</div>
                </div>
            </div>

            <!-- HUD Controls -->
            <div id="status-hud">
                <div class="hud-item">
                    <span class="hud-label">TENSION: </span>
                    <span class="hud-value"><span id="hud-tension">0</span> %</span>
                    <div class="tension-bar">
                        <div id="tension-fill"></div>
                    </div>
                </div>
                <!-- Controls -->
                <div class="control-panel">
                    <button class="minimal-btn disabled" disabled title="即将上线">[M] 多人模式</button>
                    <!-- <button class="minimal-btn" onclick="testJump()">[+] 维度跃迁</button> -->
                    <button class="minimal-btn danger" onclick="resetUniverse()">[R] 重启终端</button>
                </div>
            </div>

            <!-- Synthesis Dock -->
            <div id="synthesis-dock-container">
                <div class="dock-header">SYNTHESIS DOCK</div>
                <div id="dock-dropzone">
                    <span class="placeholder-text">DRAG CARDS HERE<br><small>将下方胶囊拖入此槽位</small></span>
                </div>
                <button id="btn-synthesize" class="action-btn" disabled>SYNTHESIZE / 合成推演</button>
            </div>

            <!-- Node Info Card -->
            <div id="node-info-card" class="hidden">
                <div class="card-header">
                    NODE <span id="card-node-id" class="mono-text">N/A</span>
                    <button id="btn-close-card" class="close-btn">&times;</button>
                </div>
                <div id="card-narrative-summary" class="card-body"></div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- Lower (40%): 2D Event Lines -->
        <div id="lower-view">
            <div class="panel-header">EVENT INTERSECTION // 平行事件轨</div>
            <div id="event-lines-container"></div>
        </div>
    </div>

    <!-- Main Entry Module -->
    <script type="module" src="js/universe.js"></script>
</body>

</html>